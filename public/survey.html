<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FF Survey</title>
    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <!-- 10 survey questions -->
    <!-- each answer scale 1-5 -->
    <!-- answers based on how much user agrees/disagrees with question -->

    <!-- navbar -->
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand " href="home.html">Friend Finder</a>
    </nav>
    
    <!-- header jumbotron -->
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">F R I E N D | F I N D E R</h1>
            <p class="lead">10 questions : ranging from 1-5, how much do you agree??</p>
        </div>
    </div>

    <!-- form container -->
    <div class="container">
        <!-- survey title -->
        <h2>Survey Questions</h2>

        <br>

        <!-- about user form -->
        <h6>{ about you ! }</h6>
        <form>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" aria-describedby="name" placeholder="Name">
            </div>
            <div class="form-group">
                <label for="photoLink">Link a photo</label>
                <input type="url" class="form-control" id="photo" placeholder="Photo link">
            </div>
        </form>
    <!-- end survey form container -->
    </div>

    <br>

    <!-- survey questions container -->
    <div class="container">

        <!-- question 1 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 1</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q1">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 2 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 2</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q2">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 3 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 3</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q3">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 4 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 4</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q4">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 5 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 5</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q5">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 6 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 6</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q6">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>
        
        <br>

        <!-- question 7 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 7</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q7">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 8 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 8</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q8">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 9 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 9</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q9">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>

        <br>

        <!-- question 10 -->
        <div class="card">
            <div class="card-body">
                <h5>Question 10</h5>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Molestias numquam, inventore nesciunt totam quas ex hic, atque, optio veritatis vel earum eaque adipisci incidunt reiciendis corporis modi error minus fugiat!</p>
                <select class="custom-select" id="q10">
                    <option selected>Select an option</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
        </div>
    
    <!-- end survey questions container -->
    </div>

    <br>

    <!-- submit button container -->
    <div class="container">
        <button type="submit" class="btn btn-success" id='submitBtn'>Submit</button>
    </div>

    <!-- results modal -->
    <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="matchName"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <img id="matchPhoto" src="#" alt="Match photo">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

    <!-- footer -->
    <footer class="p-3 mt-5 bg-dark text-white sticky-bottom">
        <p class="text-center">
            Friend Finder 2019
        </p>
    </footer>

<!-- bootstrap js -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- app js -->
<script>

    // ***attempt to redo because jquery isn't working

    // capture form inputs
    $(document).ready(function() {
        $('#submitBtn').on('click', function () {
        // form validation 
       function validate () {
           const isValid = true$('.validate').each(function () {
               if ($(this).val() === '') {
                   isValid = false
               }
           })   
           $('.browser-default').each(function() {
               if ($(this).val() === "") {
                   isValid = false
               }
           })

           return isValid
       } 
       // if form is validated, create object for user's data
       if (validate() == true) {
           const friendMaker = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                score: [
                        $('#q1').val(),
                        $('#q2').val(),
                        $('#q3').val(),
                        $('#q4').val(),
                        $('#q5').val(),
                        $('#q6').val(),
                        $('#q7').val(),
                        $('#q8').val(),
                        $('#q9').val(),
                        $('#q10').val(),
                ]
            }
            // grab url of current page
            const currentUrl = window.location.origin 

            // ajax POST data to friends api
            $.post(currentUrl + '/api/friends', friendMaker, function (data) {
                // grab result from AJAX post so top match w/ photo is displayed
                $('matchName').text(data.name)
                $('matchPhoto').attr('src', data.photo)
            })
            // show result modal
            $('.modal').modal()

            //clear form after submission
            $('#name').val('')
            $('#photo').val('')
            $('#q1').val('')
            $('#q2').val('')
            $('#q3').val('')
            $('#q4').val('')
            $('#q5').val('')
            $('#q6').val('')
            $('#q7').val('')
            $('#q8').val('')
            $('#q9').val('')
            $('#q10').val('')
            // else tell user to fill out all of form
            } else {
            alert("Please fill out ALL fields before submitting survey!")
            // $('.toast').toast(option)
            }

        })   
  
    })
</script>
</body>
</html>